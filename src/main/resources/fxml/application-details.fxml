<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<BorderPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.visa.management.controllers.ApplicationDetailsController"
            styleClass="root">

    <!-- Header -->
    <top>
        <HBox alignment="CENTER_LEFT" spacing="20" styleClass="navbar">
            <padding>
                <Insets top="20" right="40" bottom="20" left="40"/>
            </padding>
            <Button text="â† Back to Dashboard" onAction="#handleBack" styleClass="btn-back"/>
            <Label text="ðŸŒ Application Details" styleClass="logo">
                <font>
                    <Font name="System Bold" size="24"/>
                </font>
            </Label>
        </HBox>
    </top>

    <!-- Center Content -->
    <center>
        <ScrollPane fitToWidth="true" fitToHeight="true" styleClass="scroll-pane" style="-fx-background-color: #f5f5f5;">
            <VBox spacing="20" alignment="TOP_CENTER" style="-fx-background-color: #f5f5f5;">
                <padding>
                    <Insets top="20" right="60" bottom="30" left="60"/>
                </padding>

                <!-- Main Details Card -->
                <VBox spacing="20" styleClass="form-container" maxWidth="1400" prefWidth="1400">
                    <padding>
                        <Insets top="30" right="50" bottom="30" left="50"/>
                    </padding>

                    <!-- Header Section -->
                    <HBox alignment="CENTER_LEFT" spacing="20">
                        <VBox spacing="5" HBox.hgrow="ALWAYS">
                            <Label text="Application Information" styleClass="section-title">
                                <font>
                                    <Font name="System Bold" size="26"/>
                                </font>
                            </Label>
                            <Label fx:id="applicationIdLabel" text="VSA1234567" styleClass="section-subtitle">
                                <font>
                                    <Font size="16"/>
                                </font>
                            </Label>
                        </VBox>
                        <Label fx:id="statusLabel" text="Processing" styleClass="status-badge"
                               style="-fx-background-color: #FF9800; -fx-text-fill: white; -fx-padding: 10 20; -fx-background-radius: 5; -fx-font-weight: bold; -fx-font-size: 14px;"/>
                    </HBox>

                    <Separator/>

                    <!-- Personal Information Section -->
                    <VBox spacing="15">
                        <Label text="ðŸ‘¤ Personal Information" styleClass="section-header" style="-fx-text-fill: #2196F3;">
                            <font>
                                <Font name="System Bold" size="20"/>
                            </font>
                        </Label>

                        <GridPane hgap="40" vgap="18">
                            <columnConstraints>
                                <ColumnConstraints percentWidth="25"/>
                                <ColumnConstraints percentWidth="25"/>
                                <ColumnConstraints percentWidth="25"/>
                                <ColumnConstraints percentWidth="25"/>
                            </columnConstraints>
                            
                            <!-- Row 1 -->
                            <VBox spacing="5" GridPane.rowIndex="0" GridPane.columnIndex="0">
                                <Label text="First Name" styleClass="field-label" style="-fx-text-fill: #666;">
                                    <font>
                                        <Font name="System Bold" size="11"/>
                                    </font>
                                </Label>
                                <Label fx:id="firstNameLabel" text="John" styleClass="field-value" style="-fx-text-fill: #333; -fx-font-size: 14px;">
                                    <font>
                                        <Font size="14"/>
                                    </font>
                                </Label>
                            </VBox>

                            <VBox spacing="5" GridPane.rowIndex="0" GridPane.columnIndex="1">
                                <Label text="Last Name" styleClass="field-label" style="-fx-text-fill: #666;">
                                    <font>
                                        <Font name="System Bold" size="11"/>
                                    </font>
                                </Label>
                                <Label fx:id="lastNameLabel" text="Doe" styleClass="field-value" style="-fx-text-fill: #333; -fx-font-size: 14px;">
                                    <font>
                                        <Font size="14"/>
                                    </font>
                                </Label>
                            </VBox>

                            <VBox spacing="5" GridPane.rowIndex="0" GridPane.columnIndex="2">
                                <Label text="National ID" styleClass="field-label" style="-fx-text-fill: #666;">
                                    <font>
                                        <Font name="System Bold" size="11"/>
                                    </font>
                                </Label>
                                <Label fx:id="nationalIdLabel" text="123456789" styleClass="field-value" style="-fx-text-fill: #333; -fx-font-size: 14px;">
                                    <font>
                                        <Font size="14"/>
                                    </font>
                                </Label>
                            </VBox>

                            <VBox spacing="5" GridPane.rowIndex="0" GridPane.columnIndex="3">
                                <Label text="Nationality" styleClass="field-label" style="-fx-text-fill: #666;">
                                    <font>
                                        <Font name="System Bold" size="11"/>
                                    </font>
                                </Label>
                                <Label fx:id="nationalityLabel" text="American" styleClass="field-value" style="-fx-text-fill: #333; -fx-font-size: 14px;">
                                    <font>
                                        <Font size="14"/>
                                    </font>
                                </Label>
                            </VBox>

                            <!-- Row 2 -->
                            <VBox spacing="5" GridPane.rowIndex="1" GridPane.columnIndex="0">
                                <Label text="Passport Number" styleClass="field-label" style="-fx-text-fill: #666;">
                                    <font>
                                        <Font name="System Bold" size="11"/>
                                    </font>
                                </Label>
                                <Label fx:id="passportLabel" text="US123456789" styleClass="field-value" style="-fx-text-fill: #333; -fx-font-size: 14px;">
                                    <font>
                                        <Font size="14"/>
                                    </font>
                                </Label>
                            </VBox>

                            <VBox spacing="5" GridPane.rowIndex="1" GridPane.columnIndex="1">
                                <Label text="Email" styleClass="field-label" style="-fx-text-fill: #666;">
                                    <font>
                                        <Font name="System Bold" size="11"/>
                                    </font>
                                </Label>
                                <Label fx:id="emailLabel" text="john.doe@email.com" styleClass="field-value" style="-fx-text-fill: #333; -fx-font-size: 14px;">
                                    <font>
                                        <Font size="14"/>
                                    </font>
                                </Label>
                            </VBox>

                            <VBox spacing="5" GridPane.rowIndex="1" GridPane.columnIndex="2">
                                <Label text="Phone" styleClass="field-label" style="-fx-text-fill: #666;">
                                    <font>
                                        <Font name="System Bold" size="11"/>
                                    </font>
                                </Label>
                                <Label fx:id="phoneLabel" text="+1234567890" styleClass="field-value" style="-fx-text-fill: #333; -fx-font-size: 14px;">
                                    <font>
                                        <Font size="14"/>
                                    </font>
                                </Label>
                            </VBox>

                            <VBox spacing="5" GridPane.rowIndex="1" GridPane.columnIndex="3">
                                <Label text="Applied Date" styleClass="field-label" style="-fx-text-fill: #666;">
                                    <font>
                                        <Font name="System Bold" size="11"/>
                                    </font>
                                </Label>
                                <Label fx:id="appliedDateLabel" text="2025-12-31" styleClass="field-value" style="-fx-text-fill: #333; -fx-font-size: 14px;">
                                    <font>
                                        <Font size="14"/>
                                    </font>
                                </Label>
                            </VBox>
                        </GridPane>

                        <!-- Full Width Fields -->
                        <VBox spacing="5" style="-fx-padding: 10 0 0 0;">
                            <Label text="Address" styleClass="field-label" style="-fx-text-fill: #666;">
                                <font>
                                    <Font name="System Bold" size="11"/>
                                </font>
                            </Label>
                            <Label fx:id="addressLabel" text="123 Main Street, City, Country" styleClass="field-value" wrapText="true" style="-fx-text-fill: #333; -fx-font-size: 14px;">
                                <font>
                                    <Font size="14"/>
                                </font>
                            </Label>
                        </VBox>
                    </VBox>

                    <Separator style="-fx-background-color: #e0e0e0;"/>

                    <!-- Visa Information Section -->
                    <VBox spacing="15">
                        <Label text="âœˆï¸ Visa Information" styleClass="section-header" style="-fx-text-fill: #2196F3;">
                            <font>
                                <Font name="System Bold" size="20"/>
                            </font>
                        </Label>

                        <GridPane hgap="40" vgap="18">
                            <columnConstraints>
                                <ColumnConstraints percentWidth="50"/>
                                <ColumnConstraints percentWidth="50"/>
                            </columnConstraints>
                            
                            <VBox spacing="5" GridPane.rowIndex="0" GridPane.columnIndex="0">
                                <Label text="Destination Country" styleClass="field-label" style="-fx-text-fill: #666;">
                                    <font>
                                        <Font name="System Bold" size="11"/>
                                    </font>
                                </Label>
                                <Label fx:id="countryLabel" text="India" styleClass="field-value" style="-fx-text-fill: #333; -fx-font-size: 14px;">
                                    <font>
                                        <Font size="14"/>
                                    </font>
                                </Label>
                            </VBox>

                            <VBox spacing="5" GridPane.rowIndex="0" GridPane.columnIndex="1">
                                <Label text="Visa Type" styleClass="field-label" style="-fx-text-fill: #666;">
                                    <font>
                                        <Font name="System Bold" size="11"/>
                                    </font>
                                </Label>
                                <Label fx:id="visaTypeLabel" text="Tourist Visa" styleClass="field-value" style="-fx-text-fill: #333; -fx-font-size: 14px;">
                                    <font>
                                        <Font size="14"/>
                                    </font>
                                </Label>
                            </VBox>
                        </GridPane>
                    </VBox>

                    <!-- Approval Details Section (Only visible when approved) -->
                    <VBox spacing="15" fx:id="approvalSection">
                        <Separator style="-fx-background-color: #e0e0e0;"/>
                        
                        <Label text="âœ… Approval Details" styleClass="section-header" style="-fx-text-fill: #4CAF50;">
                            <font>
                                <Font name="System Bold" size="20"/>
                            </font>
                        </Label>

                        <GridPane hgap="40" vgap="18">
                            <columnConstraints>
                                <ColumnConstraints percentWidth="33"/>
                                <ColumnConstraints percentWidth="33"/>
                                <ColumnConstraints percentWidth="33"/>
                            </columnConstraints>
                            
                            <VBox spacing="5" GridPane.rowIndex="0" GridPane.columnIndex="0">
                                <Label text="Visa Duration" styleClass="field-label" style="-fx-text-fill: #666;">
                                    <font>
                                        <Font name="System Bold" size="11"/>
                                    </font>
                                </Label>
                                <Label fx:id="visaDurationLabel" text="-" styleClass="field-value" visible="false"
                                       style="-fx-text-fill: #4CAF50; -fx-font-weight: bold; -fx-font-size: 14px;">
                                    <font>
                                        <Font size="14"/>
                                    </font>
                                </Label>
                            </VBox>

                            <VBox spacing="5" GridPane.rowIndex="0" GridPane.columnIndex="1">
                                <Label text="Approved By" styleClass="field-label" style="-fx-text-fill: #666;">
                                    <font>
                                        <Font name="System Bold" size="11"/>
                                    </font>
                                </Label>
                                <Label fx:id="approvedByLabel" text="-" styleClass="field-value" visible="false" style="-fx-text-fill: #333; -fx-font-size: 14px;">
                                    <font>
                                        <Font size="14"/>
                                    </font>
                                </Label>
                            </VBox>

                            <VBox spacing="5" GridPane.rowIndex="0" GridPane.columnIndex="2">
                                <Label text="Approval Date" styleClass="field-label" style="-fx-text-fill: #666;">
                                    <font>
                                        <Font name="System Bold" size="11"/>
                                    </font>
                                </Label>
                                <Label fx:id="approvalDateLabel" text="-" styleClass="field-value" visible="false" style="-fx-text-fill: #333; -fx-font-size: 14px;">
                                    <font>
                                        <Font size="14"/>
                                    </font>
                                </Label>
                            </VBox>
                        </GridPane>
                    </VBox>

                    <!-- Visa-Specific Details Section -->
                    <VBox fx:id="visaSpecificDetailsBox" spacing="15" managed="false" visible="false">
                        <Separator style="-fx-background-color: #e0e0e0;"/>
                        
                        <Label text="ðŸ“‹ Visa-Specific Details" styleClass="section-header" style="-fx-text-fill: #2196F3;">
                            <font>
                                <Font name="System Bold" size="20"/>
                            </font>
                        </Label>
                        
                        <!-- Content will be dynamically added here -->
                    </VBox>

                    <!-- Documents Section -->
                    <VBox fx:id="documentsBox" spacing="15" managed="false" visible="false">
                        <Separator style="-fx-background-color: #e0e0e0;"/>
                        
                        <Label text="ðŸ“Ž Uploaded Documents" styleClass="section-header" style="-fx-text-fill: #2196F3;">
                            <font>
                                <Font name="System Bold" size="20"/>
                            </font>
                        </Label>
                        
                        <!-- Document info will be dynamically added here -->
                    </VBox>

                </VBox>
            </VBox>
        </ScrollPane>
    </center>

</BorderPane>